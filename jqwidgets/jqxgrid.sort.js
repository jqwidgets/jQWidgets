/*
jQWidgets v5.0.0 (2017-Aug)
Copyright (c) 2011-2017 jQWidgets.
License: http://jqwidgets.com/license/
*/
!function(t){t.jqx.dataview.sort=function(){this.sortby=function(r,s,e){var i=Object.prototype.toString;if(null==s)return this.sortdata=null,this.sortcache={},this.grid._pagescache=new Array,this.grid._cellscache=new Array,void this.refresh();void 0==s&&(s=!0),s="a"==s||"asc"==s||"ascending"==s||1==s;var o=r;this.sortfield=r,this.sortfielddirection=s?"asc":"desc",void 0==this.sortcache&&(this.sortcache={}),this.sortdata=[];var n=[],a=!1;if("constructor"==o&&(o=""),!this.virtualmode&&null!=this.sortcache[o]){var d=this.sortcache[o];n=d._sortdata,d.direction==s?n.reverse():(!d.direction&&s&&n.reverse(),a=!0),n.length<this.totalrecords&&(this.sortcache={},a=!1,n=[])}Object.prototype.toString="function"==typeof r?r:function(){return this[r]};var c=this.records,l=(this.that,"");if(this.source.datafields&&t.each(this.source.datafields,function(){if(this.name==r)return this.type&&(l=this.type),!1}),0==n.length)if(c.length){for(var u=c.length,h=0;h<u;h++)if(null!=(m=c[h])){var f=(v=m).toString();n.push({sortkey:f,value:v,index:h})}}else{var g=!1;for(obj in c){var m=c[obj];if(void 0==m){g=!0;break}var v=m;n.push({sortkey:v.toString(),value:v,index:obj})}g&&t.each(c,function(t,r){n.push({sortkey:r.toString(),value:r,index:t})})}if(!a)if(null==e){this._sortcolumntype=l;var p=this;n.sort(function(t,r){return p._compare(t,r,l)})}else n.sort(e);s||n.reverse(),Object.prototype.toString=i,this.sortdata=n,this.sortcache[o]={_sortdata:n,direction:s},this.reload(this.records,this.rows,this.filters,this.updated,!0)},this.clearsortdata=function(){this.sortcache={},this.sortdata=null},this._compare=function(r,s,e){var r=r.sortkey,s=s.sortkey;if(void 0===r&&(r=null),void 0===s&&(s=null),null===r&&null===s)return 0;if(null===r&&null!==s)return-1;if(null!==r&&null===s)return 1;if(t.jqx.dataFormat)if(e&&""!=e)switch(e){case"number":case"int":case"float":return r<s?-1:r>s?1:0;case"date":case"time":return r<s?-1:r>s?1:0;case"string":case"text":r=String(r).toLowerCase(),s=String(s).toLowerCase()}else{if(t.jqx.dataFormat.isNumber(r)&&t.jqx.dataFormat.isNumber(s))return r<s?-1:r>s?1:0;if(t.jqx.dataFormat.isDate(r)&&t.jqx.dataFormat.isDate(s))return r<s?-1:r>s?1:0;t.jqx.dataFormat.isNumber(r)||t.jqx.dataFormat.isNumber(s)||(r=String(r).toLowerCase(),s=String(s).toLowerCase())}try{if(r<s)return-1;if(r>s)return 1}catch(t){}return 0},this._equals=function(t,r){return 0===this._compare(t,r)}},t.extend(t.jqx._jqxGrid.prototype,{_rendersortcolumn:function(){var r=this.that,s=this.getsortcolumn();if(this.sortdirection){var e=function(s,e){var i=r.getcolumn(s);i&&(e.ascending?t.jqx.aria(i.element,"aria-sort","ascending"):e.descending?t.jqx.aria(i.element,"aria-sort","descending"):t.jqx.aria(i.element,"aria-sort","none"))};this._oldsortinfo&&this._oldsortinfo.column&&e(this._oldsortinfo.column,{ascending:!1,descending:!1}),e(s,this.sortdirection)}this._oldsortinfo={column:s,direction:this.sortdirection},this.sortdirection&&t.each(this.columns.records,function(e,i){var o=t.data(document.body,"groupsortelements"+this.displayfield);null==s||this.displayfield!=s?(t(this.sortasc).hide(),t(this.sortdesc).hide(),null!=o&&(o.sortasc.hide(),o.sortdesc.hide())):r.sortdirection.ascending?(t(this.sortasc).show(),t(this.sortdesc).hide(),null!=o&&(o.sortasc.show(),o.sortdesc.hide())):(t(this.sortasc).hide(),t(this.sortdesc).show(),null!=o&&(o.sortasc.hide(),o.sortdesc.show()))})},getsortcolumn:function(){return void 0!=this.sortcolumn?this.sortcolumn:null},removesort:function(){this.sortby(null)},sortby:function(t,r,s,e,i){if(this._loading&&!1!==i)throw new Error("jqxGrid: "+this.loadingerrormessage);if(null==t&&(r=null,t=this.sortcolumn),void 0!=t){var o=this.that;if(void 0==s&&null!=o.source.sortcomparer&&(s=o.source.sortcomparer),ascending="a"==r||"asc"==r||"ascending"==r||1==r,o.sortdirection=null!=r?{ascending:ascending,descending:!ascending}:{ascending:!1,descending:!1},o.sortcolumn=null!=r?t:null,o.source.sort||o.virtualmode){if(o.dataview.sortfield=t,o.dataview.sortfielddirection=null==r?"":ascending?"asc":"desc",o.source.sort&&!this._loading)return o.source.sort(t,r),void o._raiseEvent(6,{sortinformation:o.getsortinformation()})}else o.dataview.sortby(t,r,s);if(!1===e)return;o.groupable&&o.groups.length>0?(o._render(!0,!1,!1),o._updategroupheadersbounds&&o.showgroupsheader&&o._updategroupheadersbounds(),o._postrender("sort")):(o.pageable&&o.dataview.updateview(),o._updaterowsproperties(),o.rendergridcontent(!0),o._postrender("sort")),o._raiseEvent(6,{sortinformation:o.getsortinformation()})}},_togglesort:function(t){var r=this.that;if(!this.disabled&&t.sortable&&r.sortable){var s=r.getsortinformation(),e=null;null!=s.sortcolumn&&s.sortcolumn==t.displayfield?(e=s.sortdirection.ascending,e=r.sorttogglestates>1?1!=e&&null:!e):e=!0,r.sortby(t.displayfield,e,null)}}})}(jqxBaseFramework);

