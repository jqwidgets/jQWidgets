/*
jQWidgets v5.1.0 (2017-Aug)
Copyright (c) 2011-2017 jQWidgets.
License: http://jqwidgets.com/license/
*/
!function(e){e.jqx.jqxWidget("jqxRangeSelector","",{}),e.extend(e.jqx._jqxRangeSelector.prototype,{defineInstance:function(){var t={width:400,height:100,min:0,max:100,range:{from:0,to:1/0,min:0,max:1/0},majorTicksInterval:10,minorTicksInterval:1,showMajorTicks:!0,showMinorTicks:!1,snapToTicks:!0,labelsFormat:null,markersFormat:null,showLabels:!0,labelsOnTicks:!0,markersPosition:"top",labelsFormatFunction:null,groupLabelsFormatFunction:null,markersFormatFunction:null,showGroupLabels:!1,showMarkers:!0,resizable:!0,moveOnClick:!0,disabled:!1,rtl:!1,padding:"auto",events:["change"]};return this===e.jqx._jqxRangeSelector.prototype?t:(e.extend(!0,this,t),t)},createInstance:function(t){var i=this;if(this._isTouchDevice=e.jqx.mobile.isTouchDevice(),!e.jqx.dataAdapter)throw new Error("jqxRangeSelector: Missing reference to the following module: 'jqxdata.js'.");var r=e.jqx.isHidden(this.host);this.render();var s=this.host.width(),a=this.host.height();e.jqx.utilities.resize(this.host,function(){var e=i.host.width(),t=i.host.height();i.range=i.getRange(),r?(i.refresh(),r=!1):s==e&&a==t||i.refresh(),s=i.host.width(),a=i.host.height()})},render:function(){(this.host.children().length>1||this.rangeSelector)&&(this._removeHandlers(),this.rangeSelector&&this.rangeSelector.remove()),this.host.addClass(this.toThemeProperty("jqx-widget")),this.host.addClass(this.toThemeProperty("jqx-rangeselector")),this.host.children(":eq(0)").addClass(this.toThemeProperty("jqx-rangeselector-content")),this._id=this.element.id,"string"==typeof this.min||this.min instanceof Date?this._dataType="date":this._dataType="number",this._privateProperties(),this._checkProperties(),this._setSize(),this._scale(),this._initSlider()},refresh:function(e){1!=e&&(this.host.children(".jqx-rangeselector-ticks-container").remove(),this._removeHandlers(),this._privateProperties(),this._checkProperties(),this._setSize(),this._scale(),this._initSlider())},destroy:function(){this._removeHandlers(),this.host.remove()},setRange:function(e,t){if(e>t)throw new Error("jqxRangeSelector: range object initialization error. 'min' should be less than 'max'");var i=this._getValue();if(i.from!=e||i.to!=t){var r="The set values are in the wrong format. Please set "+("number"==this._dataType?"numeric":"date")+" values.";if("string"==typeof e||e instanceof Date){if("number"==this._dataType)throw new Error(r)}else if("date"==this._dataType)throw new Error(r);e=this._validateInput(e),t=this._validateInput(t),e>this._max&&(e=this._max),e<this._min&&(e=this._min),t>this._max&&(t=this._max),t<this._min&&(t=this._min);var s=t-e;s>this._range._max?t=e+this._range._max:s<this._range._min&&(t=e+this._range._min);var a=this._valuesArray.indexOf(e),o=this._valuesArray.indexOf(t),h=this._ticksArray[a],n=this._ticksArray[o],l=Math.abs(n-h);this.slider[0].style.width=l+"px";var d=this.rtl?n:h;if(this.slider[0].style.left=d,this._moveSlider(d),"date"==this._dataType)var e=new Date(e),t=new Date(t);this._raiseEvent("0",{type:null,from:e,to:t})}},val:function(e){if(0==arguments.length)return this.getRange();void 0!=e.from&&this.setRange(e.from,e.to)},getRange:function(){return this._getValue()},propertyChangedHandler:function(t,i,r,s){switch(i){case"showMinorTicks":1==s?e("#"+this._id+" .jqx-rangeselector-ticks-minor").css("visibility","visible"):e("#"+this._id+" .jqx-rangeselector-ticks-minor").css("visibility","hidden");break;case"showMarkers":var a=e("#"+this._id+"LeftMarker, #"+this._id+"RightMarker, #"+this._id+"LeftMarkerArrow, #"+this._id+"RightMarkerArrow");1==s?a.css("visibility","visible"):a.css("visibility","hidden");break;default:this.refresh()}},_raiseEvent:function(t,i){var r=this.events[t],s=new e.Event(r);s.owner=this,s.args=i;try{var a=this.host.trigger(s)}catch(e){}return a},_setSize:function(){this.host.width(this.width),this.host.height(this.height)},resize:function(e,t){this.width=e,this.height=t,this.refresh()},_scale:function(){var e=this.host.width(),t=this._max-this._min;this._unitPerPixel=parseFloat((t/e).toFixed(4)),this._pixelPerUnit=e/t,this._minWidth=this._roundNumber(this._range._min/this._unitPerPixel),this._maxWidth=this._roundNumber(this._range._max/this._unitPerPixel),this._minWidth=parseInt(this._minWidth),this._maxWidth=parseInt(this._maxWidth),"number"==this._dataType&&(this._majorTicksCount=t/this.majorTicksInterval,this._majorTicksCount=Math.floor(this._majorTicksCount)+1,this._majorTicksDistance=parseInt(this._roundNumber(e/(t/this.majorTicksInterval))),this._unitsCount=t/this.minorTicksInterval,this._unitsCount=Math.floor(this._unitsCount)+1,this._unitsDistance=parseInt(this._roundNumber(e/(t/this.minorTicksInterval)))),this._addTicks()},_addTicks:function(){this.host.append("<div id='"+this._id+"TicksContainer' class='jqx-rangeselector-ticks-container'></div>"),this.rangeSelector=e("#"+this._id+"TicksContainer"),this._majorTicksArray=new Array,this._ticksArray=new Array,this._valuesArray=new Array;var t=new String;e("#"+this._id+"TicksContainer").append("<div id='labelPlaceholder' style='visibility: hidden; position: absolute;'></div>");var i=this.rangeSelector.height();t="number"==this._dataType?this._addNumericTicks(i):this._addDateTicks(i);var r=0;this.showLabels&&(r+=e("#labelPlaceholder").outerHeight()+6),"number"!=this._dataType&&this.showGroupLabels&&(r+=e("#labelPlaceholder").outerHeight()+6),"auto"==this.padding&&this.host.css("padding-bottom",r),e("#labelPlaceholder").remove(),e("#"+this._id+"TicksContainer").append(t),this._ticksArray.sort(function(e,t){return e-t});for(s=1;s<this._ticksArray.length;s++)this._ticksArray[s]=this._roundNumber(this._ticksArray[s]);if(this._valuesArray.sort(function(e,t){return e-t}),"number"==this._dataType)for(s=1;s<this._valuesArray.length;s++)this._valuesArray[s]=this._roundNumber(this._valuesArray[s],"marker",!0);for(var s=1;s<this._ticksArray.length;s++)this._ticksArray[s-1]==this._ticksArray[s]&&(this._ticksArray.splice(s,1),this._valuesArray.splice(s,1));this.rtl&&(this._valuesArray=this._valuesArray.reverse())},_addNumericTicks:function(t){for(var i=this,r=new String,s=0,a=this._min,o=this._max,h=0;h<this._majorTicksCount;h++){v=this._id+"LabelTick"+(h+1);h==this._majorTicksCount-1&&(s=this.host.width());var n=i.showMajorTicks?"visible":"hidden";r+="<div id='"+v+"' class='"+this.toThemeProperty("jqx-rangeselector-ticks")+" "+this.toThemeProperty("jqx-slider-tick-horizontal")+"' style='visibility: "+n+"; left: "+s+"px;'></div>",this._ticksArray.push(s),this._majorTicksArray.push(s);var l=this._id+"Label"+(h+1),d=a;this._valuesArray.push(parseFloat(d.toFixed(4))),i.rtl&&(d=o),d=this._formatOutput(d,this.labelsFormat,this.minorTicksInterval>=1?0:2,"label"),e("#labelPlaceholder").html(d);var u=e("#labelPlaceholder").width(),m=i.showLabels?"visible":"hidden";i.labelsOnTicks&&(r+="<div id='"+l+"' class='"+this.toThemeProperty("jqx-rangeselector-labels")+"' style='visibility: "+m+"; left: "+(s-u/2)+"px; top: "+t+"px;'>"+d+"</div>");var _=s;a+=this.majorTicksInterval,o-=this.majorTicksInterval;s=(a-i._min)/i._unitPerPixel;if(s=parseInt(s),!this.labelsOnTicks&&h<this._majorTicksCount-1){var c=Math.abs(_-s);r+="<div id='"+l+"' class='"+this.toThemeProperty("jqx-rangeselector-labels")+"' style='visibility: "+m+"; left: "+(_+c/2-u/2)+"px; top: "+t+"px;'>"+d+"</div>"}}for(var s=0,f=this.showMinorTicks?"visible":"hidden",a=this._min,h=0;h<this._unitsCount;h++){var v=this._id+"MinorTick"+(h+1);h==this._unitsCount-1&&(s=this.host.width()),r+="<div id='"+v+"' class='"+this.toThemeProperty("jqx-rangeselector-ticks")+" "+this.toThemeProperty("jqx-rangeselector-ticks-minor")+" "+this.toThemeProperty("jqx-slider-tick-horizontal")+"' style='visibility: "+f+"; left: "+s+"px;'></div>";var g=a;-1===this._valuesArray.indexOf(parseFloat(g.toFixed(4)))&&(this._valuesArray.push(parseFloat(g.toFixed(4))),this._ticksArray.push(s));s=((a+=this.minorTicksInterval)-i._min)/i._unitPerPixel;s=parseInt(s)}return r},_getMillisecondsByInterval:function(e){var t={};return"year"==e||e.years?(t.divisor=e.years?e.years:1,31536e6*t.divisor):"month"==e||e.months?(t.divisor=e.months?e.months:1,2592e6*t.divisor):"week"==e||e.weeks?(t.divisor=e.weeks?e.weeks:1,6048e5*t.divisor):"day"==e||e.days?(t.divisor=e.days?e.days:1,864e5*t.divisor):"hour"==e||e.hours?(t.divisor=e.hours?e.hours:1,36e5*t.divisor):"minute"==e||e.minutes?(t.divisor=e.minutes?e.minutes:1,60*t.divisor*1e3):"second"==e||e.seconds?(t.divisor=e.seconds?e.seconds:1,1e3*t.divisor):"millisecond"==e||e.milliseconds?(t.divisor=e.milliseconds?e.milliseconds:1,1*t.divisor):t},_addDateTicks:function(t){var i=this,r=new String,s=function(e){var t="majorTicksInterval"==e?i.majorTicksInterval:i.minorTicksInterval,r=new Object;return"year"==t||t.years?(r.period="year",r.interval=864e5,r.divisor=t.years?t.years:1,r.value=31536e6*r.divisor):"month"==t||t.months?(r.period="month",r.interval=864e5,r.divisor=t.months?t.months:1,r.value=2592e6*r.divisor):"week"==t||t.weeks?(r.period="week",r.interval=864e5,r.divisor=t.weeks?t.weeks:1,r.value=6048e5*r.divisor):"day"==t||t.days?(r.period="day",r.interval=36e5,r.divisor=t.days?t.days:1,r.value=864e5*r.divisor):"hour"==t||t.hours?(r.period="hour",r.interval=6e4,r.divisor=t.hours?t.hours:1,r.value=36e5*r.divisor):"minute"==t||t.minutes?(r.period="minute",r.interval=6e4,r.divisor=t.minutes?t.minutes:1,r.value=60*r.divisor*1e3):"second"==t||t.seconds?(r.period="second",r.interval=1e3,r.divisor=t.seconds?t.seconds:1,r.value=1e3*r.divisor):("millisecond"==t||t.milliseconds)&&(r.period="millisecond",r.interval=1,r.divisor=t.milliseconds?t.milliseconds:1,r.value=1*r.divisor),r},a=function(e,t){var i=new Date(e),r=i.getDate(),s="year"==t&&0==i.getMonth()&&1==r,a="month"==t&&1==r,o="week"==t&&0==i.getDay(),h="day"==t&&0==i.getHours(),n="hour"==t&&0==i.getMinutes(),l="minute"==t&&0==i.getSeconds(),d="minute"==t&&0==i.getMilliseconds(),u="millisecond"==t;return!!(s||a||o||h||n||l||d||u)},o=function(s,a,o){var h=(s-i._min)/i._unitPerPixel;i.rtl&&(s="majorTicksInterval"==a?i._dateMajorTicks[i._dateMajorTicks.length-o]:i._dateMinorTicks[i._dateMinorTicks.length-o]),h=parseInt(h);var n=s;if(-1===i._valuesArray.indexOf(n)&&(i._ticksArray.push(h),i._valuesArray.push(n),"majorTicksInterval"==a&&i._majorTicksArray.push(h)),"majorTicksInterval"==a){var l=i._id+"LabelTick"+o,d=i.showMajorTicks?"visible":"hidden";r+="<div id='"+l+"' class='"+i.toThemeProperty("jqx-rangeselector-ticks")+" "+i.toThemeProperty("jqx-slider-tick-horizontal")+"' style='visibility: "+d+"; left: "+h+"px;'></div>";var u=n;u=i._formatOutput(u,i.labelsFormat,i.labelPrecision,"label"),e("#labelPlaceholder").html(u);var m=e("#labelPlaceholder").width(),_=i._id+"Label"+o,c=i.showLabels?"visible":"hidden";if(i.labelsOnTicks)i.labelsOnTicks&&(r+="<div id='"+_+"' class='"+i.toThemeProperty("jqx-rangeselector-labels")+"' style='visibility: "+c+"; left: "+(h-m/2)+"px; top: "+t+"px;'>"+u+"</div>");else{var f=i._getMillisecondsByInterval(i.majorTicksInterval)/i._unitPerPixel/2;r+="<div id='"+_+"' class='"+i.toThemeProperty("jqx-rangeselector-labels")+"' style='visibility: "+c+"; left: "+(f+h-m/2)+"px; top: "+t+"px;'>"+u+"</div>"}}else{var d=i.showMinorTicks?"visible":"hidden",v=i._id+"MinorTick"+o;r+="<div id='"+v+"' class='"+i.toThemeProperty("jqx-rangeselector-ticks")+" "+i.toThemeProperty("jqx-rangeselector-ticks-minor")+" "+i.toThemeProperty("jqx-slider-tick-horizontal")+"' style='visibility: "+d+"; left: "+h+"px;'></div>"}},h=function(e,t,r){for(var s=0,h=1,n=new Date(i._min).getHours(),l=864e5==t.interval,d=new Array,u=i._min;u<=i._max;u+=t.interval){if(1==l){var m=new Date(u).getHours();if(n!=m){var _;1==m?_=1:23==m&&(_=-1),u-=36e5*_,n=new Date(u).getHours()}}1==a(u,t.period)&&(s%t.divisor==0&&(r?d.push(u):o(u,e,h,t.interval),h++),s++)}return d};return i._dateMajorTicks=h("majorTicksInterval",s("majorTicksInterval"),!0),i._dateMinorTicks=h("minorTicksInterval",s("minorTicksInterval"),!0),h("majorTicksInterval",s("majorTicksInterval")),h("minorTicksInterval",s("minorTicksInterval")),1==this.showGroupLabels&&this.showLabels&&this._addGroupLabels(e("#labelPlaceholder").height()+t),r},_addGroupLabels:function(t){var i=this,r=new Date(this._min),s=new Date(this._max);if(s.getFullYear()-r.getFullYear()>0)var a="year",o=864e5;else if(s.getMonth()-r.getMonth()>0)var a="month",o=864e5;else{if(!(s.getDate()-r.getDate()>0))return;var a="day",o=36e5}for(var h=new String,n=this.toThemeProperty("jqx-rangeselector-group-labels-ticks")+" "+this.toThemeProperty("jqx-slider-tick-horizontal"),l=1,d=this._min;d<this._max;d+=o){var u=function(t){var r,s=new Date(t),o=s.getFullYear(),h=s.getMonth(),n=s.getDate(),l=!0;"year"==a&&0==h&&1==n?r=o:"month"==a&&1==n?(r=e.jqx.dataFormat.formatdate(s,"MMMM"),0==h&&(r=o+" "+r)):"day"==a&&0==s.getHours()?r=e.jqx.dataFormat.formatdate(s,"dddd"):l=!1;return{check:l,value:1==l&&i.groupLabelsFormatFunction?i.groupLabelsFormatFunction(r,s):r}}(d);if(1==u.check){var m=(d-this._min)/this._unitPerPixel;h+="<div class='"+this.toThemeProperty("jqx-rangeselector-labels")+"' style='left: "+m+"px; top: "+t+"px;'><div class='"+n+"'></div><div id='"+this._id+"GroupLabel"+l+"' class='"+this.toThemeProperty("jqx-rangeselector-group-labels")+"' style='margin-left: 5px;'>"+u.value+"</div></div>",l++}}e("#"+this._id+"TicksContainer").append(h)},_updateCursor:function(e,t){var i=this.element.style.cursor,r=this.slider.offset().left,s=r+parseInt(this.slider[0].style.width);e>r-5&&e<r+5||e>s-5&&e<s+5?""!=i&&"auto"!=i||(this.element.style.cursor="e-resize"):"e-resize"==i&&(this.element.style.cursor="auto")},_handleMouseMove:function(t){var i=this,r=i.slider,s=t.pageX,a=t.pageY;if(i._isTouchDevice){var o=e.jqx.position(t);s=o.left,a=o.top}var h=i._hostOffset.left,n=i._hostWidth;if(i.resizable&&!i.dragging&&"none"==i.resizeDirection&&s>=h&&s<=h+n&&a>=i._hostOffset.top&&a<=i._hostOffset.top+i._hostHeight&&this._updateCursor(s,a),!i.isMouseDown)return!0;if(i._isTouchDevice&&(a<i._hostOffset.top||a>i._hostOffset.top+i._hostHeight))return!0;var l=i._findNearestTick(i._sliderLeftOffset+s-i._mouseDownX),d=parseInt(l);if(d<0)return!0;d<0&&(d=0);var u=parseInt(r[0].style.width);if(1==i.resizable&&!i.dragging){w=d*i._unitPerPixel+i._min;if("left"==i.resizeDirection||i.isLeftMarkerCaptured){s<h-(v=i.isLeftMarkerCaptured?i.leftMarker.outerWidth():0)&&(s=h-v),s>h+n+v&&(s=h+n+v+1);var m=r[0].style.left,_=d-parseInt(m);if(!function(e){var t=parseInt(i._maxWidth);if(e<parseInt(i._minWidth)||e>t)return!1;var r=parseInt(i.rightMarker[0].style.left);return!(parseInt(i.leftMarker[0].style.left)>r)}(x=parseInt(u-_)))if(s>i._mouseDownX){if(s=i.sliderRight-i._minWidth-h,x=i._minWidth,u==x)return!0;if((d=l=i._findNearestTick(s))<0)return!0;parseInt(m),i._unitPerPixel,i._min;w=d*i._unitPerPixel+i._min}else{if(!(0!=i._maxWidth&&s<i._mouseDownX&&x>i._maxWidth))return!0;if(s=i.sliderRight-i._maxWidth-h,x=i._maxWidth,u==x)return!0;if((d=l=i._findNearestTick(s))<0)return!0;parseInt(m),i._unitPerPixel,i._min;w=d*i._unitPerPixel+i._min}i.slider[0].style.left=d+"px",m!=r[0].style.left&&(i.slider[0].style.width=x+"px");var c=i._findNearestTick(d),f=i._valuesArray[i._ticksArray.indexOf(c)];void 0!=f?(i.leftMarkerValue[0].innerHTML=i._formatOutput(f,i.markersFormat,0,"left"),d!=c&&(i.slider[0].style.left=c+"px")):i.leftMarkerValue[0].innerHTML=i._formatOutput(w,i.markersFormat,0,"left"),i.oldX=s,i.moved=!0}else if("right"==i.resizeDirection||i.isRightMarkerCaptured){var v=i.isRightMarkerCaptured?i.rightMarker.outerWidth():0,g=!1;s<h-v&&(s=h-v,!0),s>h+n+v&&(s=h+n+v,g=!0);var p=i._sliderInitialWidth,k=i._findNearestTick(p+i._sliderLeftOffset),y=i._findNearestTick(p+s-i._mouseDownX+i._sliderLeftOffset);if(y<0)return!0;var x=p-(_=k-y);x<=0&&(_=p,x=0);var T=parseInt(i.element.style.width);i.element.style.width.indexOf("%")>=0&&(T=i.host.width()),(g||i._sliderLeftOffset+x>=T)&&(x=T-i._sliderLeftOffset,boundDetected=!0),x>parseInt(this._maxWidth)&&(x=parseInt(this._maxWidth)),x<parseInt(this._minWidth)&&(x=parseInt(this._minWidth)),i.slider[0].style.width=x+"px";var w=(i._sliderLeftOffset+x)*i._unitPerPixel+i._min,M=i._findNearestTick(i._sliderLeftOffset+x),b=i._valuesArray[i._ticksArray.indexOf(M)];void 0!=b?(i._sliderLeftOffset+x!=M&&(i.slider[0].style.width=M-i._sliderLeftOffset+"px"),i.rightMarkerValue[0].innerHTML=i._formatOutput(b,i.markersFormat,0,"right")):i.rightMarkerValue[0].innerHTML=i._formatOutput(w,i.markersFormat,0,"right"),i.oldX=s}i._layoutShutter(),i._layoutMarkers(),i.moved=!0}1==i.dragging&&(i._moveSlider(d,!0),i.oldX=s)},_moveSlider:function(e,t){this.moved=!0;var i=parseInt(this.slider[0].style.width),r=parseInt(e+i),s=this._hostWidth,a=e;if(a<0&&(e=a=0),a+i>s&&(e=a=s-i),a>=0&&a+i<=s){this.slider[0].style.left=a+"px";var o=this._findNearestTick(a),h=-1!=this._majorTicksArray.indexOf(o),n=this._valuesArray[this._ticksArray.indexOf(o)];if(void 0!=n){if(this.leftMarkerValue[0].innerHTML=this._formatOutput(n,this.markersFormat,0,"left"),e!=o&&h&&t){this.slider[0].style.left=o+"px";r=parseInt(o+i)}}else this.leftMarkerValue[0].innerHTML=this._formatOutput(a*this._unitPerPixel+this._min,this.markersFormat,0,"left");var l=this._findNearestTick(r),d=this._valuesArray[this._ticksArray.indexOf(l)];if(void 0!=d){var u=-1!=this._majorTicksArray.indexOf(l);if(this.rightMarkerValue[0].innerHTML=this._formatOutput(d,this.markersFormat,0,"right"),r!=l&&u&&h&&t){var m=l-o;this.slider[0].style.width=m+"px"}}else this.rightMarkerValue[0].innerHTML=this._formatOutput((a+i)*this._unitPerPixel+this._min,this.markersFormat,0,"right")}this._layoutShutter(),this._layoutMarkers()},_initSlider:function(){var t=this,i=this.toThemeProperty("jqx-rangeselector-shutter")+" "+this.toThemeProperty("jqx-scrollbar-state-normal");e("#"+this._id+"TicksContainer").append("<div id='"+this._id+"ShutterLeft' class='"+i+"'></div><div id='"+this._id+"Slider' class='"+this.toThemeProperty("jqx-rangeselector-slider")+" "+this.toThemeProperty("jqx-scrollbar-thumb-state-normal")+"'><div class='"+this.toThemeProperty("jqx-rangeselector-inner-slider")+"'></div></div><div id='"+this._id+"ShutterRight' class='"+i+"'></div>"),this.slider=e("#"+this._id+"Slider"),this.shutterLeft=e("#"+this._id+"ShutterLeft"),this.shutterRight=e("#"+this._id+"ShutterRight"),this._hostOffset=this.rangeSelector.offset(),this._hostWidth=this.rangeSelector.width(),this._hostHeight=this.rangeSelector.height();var r=this._hostOffset,s=this._initRange(),a=s.left,o=(s.right-a)/this._unitPerPixel;this.slider[0].style.width=Math.round(o)+"px";var h=r.left+parseInt((a-this._min)/this._unitPerPixel);if(this.slider.offset({left:h}),this._layoutShutter(),this._initMarkers(),0==this.disabled){this.host.removeClass(this.toThemeProperty("jqx-fill-state-disabled")),this.addHandler(this.host,"dragstart.rangeselector"+this._id,function(){return!1}),this.addHandler(e(window),"jqxReady.rangeselector",function(){return t._layoutMarkers(),!1}),this.isSliderCaptured=!1,this.resizeDirection="none",this.isLeftMarkerCaptured=!1,this.isRightMarkerCaptured=!1,this.dragging=!1,this._mouseDownX;var n,l,d="mousedown.rangeselector"+this.element.id;this._isTouchDevice&&(d=e.jqx.mobile.getTouchEventName("touchstart")+".rangeselector"+this.element.id),this.addHandler(this.host,d,function(i){t.isMouseDown=!0,t._hostOffset=t.rangeSelector.offset(),t._hostWidth=t.rangeSelector.width(),t._hostHeight=t.rangeSelector.height(),t._sliderLeftOffset=parseInt(t.slider[0].style.left);var r=i.pageX,s=i.pageY;if(t._isTouchDevice){var a=e.jqx.position(i);r=a.left,s=a.top}t._initialSliderOffset=r-t.slider.offset().left;var o=t.slider.width();t._sliderInitialWidth=o,n=t.slider.offset().left,l=t._sliderInitialWidth,t.initialOffset=n;var h=parseInt(n+l);if(t.oldX=r,t._mouseDownX=r,t.resizeDirection="none",t.sliderRight=h,r>n-5&&r<n+5&&t._heightCheck(s))t.isSliderCaptured=!1,t.dragging=!1,t.resizeDirection="left";else if(r>h-5&&r<h+5&&t._heightCheck(s))t.isSliderCaptured=!1,t.dragging=!1,t.resizeDirection="right";else if(r>=n+5&&r<=h+5&&t._heightCheck(s))t.isSliderCaptured=!0,t.dragging=!0;else if(t.isSliderCaptured=!1,t.dragging=!1,t.moveOnClick){if(t.isLeftMarkerCaptured||t.isRightMarkerCaptured)return!1;var d=t._sliderLeftOffset+t._initialSliderOffset;(d=t._findNearestTick(d))<0&&(d=0);var u=parseInt(t.slider[0].style.width);s>=t.slider.offset().top&&(r>h?t._moveSlider(d-u,!0):t._moveSlider(d,!0))}}),this.addHandler(t.leftMarker,d,function(i){if(t.leftMarkerAndArrow.addClass(t.toThemeProperty("jqx-fill-state-pressed")),t.oldLeftX=i.pageX,t._isTouchDevice){var r=e.jqx.position(i);oldLeftX=r.left}t._mouseDownX=t.oldLeftX,t.isLeftMarkerCaptured=!0}),this.addHandler(t.rightMarker,d,function(i){if(t.rightMarkerAndArrow.addClass(t.toThemeProperty("jqx-fill-state-pressed")),t.oldRightX=i.pageX,t._isTouchDevice){var r=e.jqx.position(i);oldRightX=r.left}t._mouseDownX=t.oldRightX,t.isRightMarkerCaptured=!0}),this.addHandler(e(document),"selectstart.rangeselector"+this._id,function(e){if(1==t.isSliderCaptured||1==t.isLeftMarkerCaptured||1==t.isRightMarkerCaptured||1==t.dragging)return e.preventDefault(),!1});var u="mousemove.rangeselector"+this.element.id;this._isTouchDevice&&(u=e.jqx.mobile.getTouchEventName("touchmove")+".rangeselector"+this.element.id),this.addHandler(e(document),u,function(e){t._handleMouseMove(e)});var m=function(e){try{var i=t.moved;if(t.moved=!1,t.isMouseDown=!1,t.dragging=!1,t.resizeDirection="none",1==t.isLeftMarkerCaptured&&(t.leftMarkerAndArrow.removeClass(t.toThemeProperty("jqx-fill-state-pressed")),t.isLeftMarkerCaptured=!1),1==t.isRightMarkerCaptured&&(t.rightMarkerAndArrow.removeClass(t.toThemeProperty("jqx-fill-state-pressed")),t.isRightMarkerCaptured=!1),i){var r=t._getValue();t._raiseEvent("0",{type:"mouse",from:r.from,to:r.to})}}catch(e){}};this.addHandler(e(document),"mouseup.rangeselector"+this._id,function(e){m()});try{if((""!=document.referrer||window.frameElement)&&null!=window.top&&window.top!=window.self){var _=function(e){m()},c=null;window.parent&&document.referrer&&(c=document.referrer),c&&-1!=c.indexOf(document.location.host)&&window.top.document&&(window.top.document.addEventListener?window.top.document.addEventListener("mouseup",_,!1):window.top.document.attachEvent&&window.top.document.attachEvent("onmouseup",_))}}catch(e){}}else this.host.addClass(this.toThemeProperty("jqx-fill-state-disabled"));this._moveSlider(parseInt(t.slider[0].style.left)),this.moved=!1},_initMarkers:function(){var t=e("#"+this._id+"TicksContainer"),i=this.toThemeProperty("jqx-rangeselector-markers")+" "+this.toThemeProperty("jqx-disableselect")+" "+this.toThemeProperty("jqx-fill-state-normal");t.append("<div id='"+this._id+"LeftMarker' class='"+i+"'></div><div id='"+this._id+"RightMarker' class='"+i+"'></div>");var r=this.toThemeProperty("jqx-rangeselector-marker-arrow")+" "+this.toThemeProperty("jqx-fill-state-normal");"bottom"==this.markersPosition?r+=" "+this.toThemeProperty("jqx-rangeselector-marker-arrow-bottom"):r+=" "+this.toThemeProperty("jqx-rangeselector-marker-arrow-top"),t.append("<div id='"+this._id+"LeftMarkerArrow' class='"+r+" "+this.toThemeProperty("jqx-rangeselector-marker-left-arrow")+"'></div>"),t.append("<div id='"+this._id+"RightMarkerArrow' class='"+r+" "+this.toThemeProperty("jqx-rangeselector-marker-right-arrow")+"'></div>"),e("#"+this._id+"LeftMarker").append("<div id='"+this._id+"LeftMarkerValue' class='"+this.toThemeProperty("jqx-disableselect")+" "+this.toThemeProperty("jqx-rangeselector-markers-value")+"'></div>"),e("#"+this._id+"RightMarker").append("<div id='"+this._id+"RightMarkerValue' class='"+this.toThemeProperty("jqx-disableselect")+" "+this.toThemeProperty("jqx-rangeselector-markers-value")+"'></div>");var s=e("#"+this._id+"LeftMarker, #"+this._id+"RightMarker, #"+this._id+"LeftMarkerArrow, #"+this._id+"RightMarkerArrow"),a=e("#"+this._id+"LeftMarker, #"+this._id+"LeftMarkerArrow"),o=e("#"+this._id+"RightMarker, #"+this._id+"RightMarkerArrow");if(1==this.showMarkers?s.css("visibility","visible"):s.css("visibility","hidden"),0==this.disabled&&1==this.resizable){var h=this;this.addHandler(a,"mouseenter.rangeselector"+this._id,function(e){h.element.style.cursor="pointer",a.addClass(h.toThemeProperty("jqx-fill-state-hover"))}),this.addHandler(a,"mouseleave.rangeselector"+this._id,function(e){h.element.style.cursor="auto",a.removeClass(h.toThemeProperty("jqx-fill-state-hover"))}),this.addHandler(o,"mouseenter.rangeselector"+this._id,function(e){h.element.style.cursor="pointer",o.addClass(h.toThemeProperty("jqx-fill-state-hover"))}),this.addHandler(o,"mouseleave.rangeselector"+this._id,function(e){h.element.style.cursor="auto",o.removeClass(h.toThemeProperty("jqx-fill-state-hover"))})}this.leftMarkerAndArrow=a,this.rightMarkerAndArrow=o,this.leftMarkerArrow=e("#"+this._id+"LeftMarkerArrow"),this.rightMarkerArrow=e("#"+this._id+"RightMarkerArrow"),this.leftMarker=e("#"+this._id+"LeftMarker"),this.rightMarker=e("#"+this._id+"RightMarker"),this.leftMarkerValue=e("#"+this._id+"LeftMarkerValue"),this.rightMarkerValue=e("#"+this._id+"RightMarkerValue");var n=this._initRange();this._updateMarkersValues(n.left,n.right),this._layoutMarkers(),"auto"==this.padding?(this.host.css("padding-left",this.leftMarker[0].offsetWidth),this.host.css("padding-right",this.rightMarker[0].offsetWidth),this.host.css("padding-top",this._leftMarkerHeight+7)):this.host.css("padding",this.padding)},_layoutMarkers:function(){if(1==this.showMarkers){this._hostOffset||(this._hostOffset=this.rangeSelector.offset()),this._leftMarkerHeight||(this._leftMarkerHeight=this.leftMarker.outerHeight(),this._rightMarkerHeight=this.rightMarker.outerHeight());this._hostOffset.top;var e=parseInt(this.slider[0].style.left)+this._hostOffset.left,t=-5;"bottom"==this.markersPosition&&(t=parseInt(this.element.style.height)+4+this._rightMarkerHeight);var i=t-this._leftMarkerHeight,r=t-this._rightMarkerHeight;"bottom"==this.markersPosition&&(t=parseInt(this.element.style.height)-6);var s=this.leftMarker[0].offsetWidth,a=1+e-s-this._hostOffset.left;this.leftMarker[0].style.left=a+"px",this.leftMarker[0].style.top=i+"px",this.leftMarkerArrow[0].style.left=2+a+s+"px",this.leftMarkerArrow[0].style.top=6+t+"px";var o=e+parseInt(this.slider[0].style.width)-this._hostOffset.left;this.rightMarker[0].style.left=o+"px",this.rightMarker[0].style.top=r+"px",this.rightMarkerArrow[0].style.left=7+o+"px",this.rightMarkerArrow[0].style.top=6+t+"px"}},_updateMarkersValues:function(e,t){var i=e,r=t;this.leftMarkerValue[0].innerHTML=this._formatOutput(i,this.markersFormat,0,"left",!0),this.rightMarkerValue[0].innerHTML=this._formatOutput(r,this.markersFormat,0,"right",!0)},_removeHandlers:function(){var t=this.element.id,i=e("#"+t+"LeftMarker, #"+t+"LeftMarkerArrow"),r=e("#"+t+"RightMarker, #"+t+"RightMarkerArrow"),s="mousemove.rangeselector"+t,a="mousedown.rangeselector"+t;this._isTouchDevice&&(s=e.jqx.mobile.getTouchEventName("touchmove")+".rangeselector"+t,a=e.jqx.mobile.getTouchEventName("touchstart")+".rangeselector"+t),this.removeHandler(e(document),s),this.removeHandler(e(document),"mouseup.rangeselector"+t),this.removeHandler(this.host,a),this.removeHandler(this.host,"click.rangeselector"+t),this.removeHandler(this.host,"dragstart.rangeselector"+t),this.removeHandler(i,"mouseenter.rangeselector"+t),this.removeHandler(i,"mouseleave.rangeselector"+t),this.removeHandler(r,"mouseenter.rangeselector"+t),this.removeHandler(r,"mouseleave.rangeselector"+t),this.removeHandler(e("#"+t+"LeftMarker"),a),this.removeHandler(e("#"+t+"RightMarker"),a),this.removeHandler(e("#"+t+"LeftMarkerValue, #"+t+"RightMarkerValue"),"selectstart.rangeselector"+t)},_heightCheck:function(e){var t=this.slider,i=t.offset().top;return e>=i&&e<=i+t.height()},_checkProperties:function(){this._range._from<this._min?this._range._from=this._min:this._range._from>this._min&&this._range._from>this._max&&(this._range._from=this._min),this._range._to>this._max?this._range._to=this._max:this._range._to<this._min&&this._range._to<this._max&&(this._range._to=this._max);var e=this._max-this._min;this._range._min>e&&(this._range._min=e),this._range._max>e&&(this._range._max=e);var t=this._range._to-this._range._from;t<this._range._min?this._range._to=this._range._from+this._range._min:t>this._range._max&&(this._range._to=this._range._from+this._range._max)},_findNearestTick:function(e){for(var t=0,i=Math.abs(e-this._ticksArray[0]),r=1;r<this._ticksArray.length;r++){var s=Math.abs(e-this._ticksArray[r]);i>s&&(i=s,t=r)}return this._ticksArray[t]},_privateProperties:function(){this._min=this._validateInput(this.min),this._max=this._validateInput(this.max),this._range=new Object,this._range._from=this._validateInput(void 0!=this.range.from?this.range.from:0),this._range._to=this._validateInput(void 0!=this.range.to?this.range.to:1/0),this._range._min=this._minMaxDate(void 0!=this.range.min?this.range.min:0),this._range._max=this._minMaxDate(void 0!=this.range.max?this.range.max:1/0)},_validateInput:function(e){var t;return"number"==typeof e?t=e:"string"==typeof e?t=Date.parse(e):e instanceof Date&&(t=e.getTime()),t},_minMaxDate:function(e){if("number"!=typeof e){var t;switch(e){case"millisecond":t=1;break;case"second":t=1e3;break;case"minute":t=6e4;break;case"hour":t=36e5;break;case"day":t=864e5;break;case"week":t=6048e5;break;default:t=e.milliseconds?e.milliseconds:0+e.seconds?1e3*e.seconds:0+e.minutes?6e4*e.minutes:0+e.hours?36e5*e.hours:0+e.days?864e5*e.days:0+e.weeks?6048e5*e.weeks:0}return t}return e},_formatOutput:function(t,i,r,s,a){var o;if(this.values||(this.values=new Array),this.values[s]=t,"label"==s&&this.labelsFormatFunction)o="date"==this._dataType?this._roundDate(t):this._roundNumber(t,"label"),o=this.labelsFormatFunction(o);else if("label"!=s&&this.markersFormatFunction)"date"==this._dataType&&(o=this._roundDate(t)),o=this.markersFormatFunction(t,s);else if(i)"number"==this._dataType?o=e.jqx.dataFormat.formatnumber(t,i):(o=this._roundDate(t),o=e.jqx.dataFormat.formatdate(o,i));else{if("date"==this._dataType){var h;null==this.labelsFormat&&null==this.markersFormat?h="both labelsFormat and markersFormat":null==this.labelsFormat?h="labelsFormat":null==this.markersFormat&&(h="markersFormat");var n="When the data format is date, "+h+" should be set.";throw new Error(n)}o=t.toFixed(r)}return o},_getValue:function(e){function t(e){return"number"===i._dataType?Math.round(e/r)*r:i._roundNumber(e,"marker")}var i=this,r=i.minorTicksInterval,s=this.slider,a=s.width(),o=new Object,h=(s.offset().left-this.rangeSelector.offset().left)*this._unitPerPixel+this._min;if(o.from=t(h),o.to=t(h+a*this._unitPerPixel),!e&&1==this.snapToTicks){var n=this._findNearestTick((o.from-this._min)/this._unitPerPixel);o.from=this._valuesArray[this._ticksArray.indexOf(n)];var l=this._findNearestTick((o.to-this._min)/this._unitPerPixel);o.to=this._valuesArray[this._ticksArray.indexOf(l)]}return"date"==this._dataType&&(o.from=new Date(o.from),o.to=new Date(o.to)),o},_roundNumber:function(e,t,i){var r;return"marker"==t?(1==i&&(e=parseFloat(e)),r=parseFloat(e)):r=parseFloat(e),r},_roundDate:function(e){"number"==typeof e&&(e=new Date(e));var t=this._max-this._min;if(t>12096e5){var i=e.getDate();e.getHours()>12&&(e.setDate(i+1),e.setHours(0),e.setMinutes(0),e.setSeconds(0))}else t>1728e5&&(e.setHours(e.getHours()+Math.round(e.getMinutes()/60)),e.setMinutes(0),e.setSeconds(0));return e},_layoutShutter:function(){var t=parseInt(this.slider[0].style.left);this.shutterLeft[0].style.width=t+"px",this.shutterLeft[0].style.left="0px",e.jqx.browser.msie&&e.jqx.browser.version<9&&(this.shutterLeft[0].style.filter="progid:DXImageTransform.Microsoft.Alpha(Opacity=75)",this.shutterRight[0].style.filter="progid:DXImageTransform.Microsoft.Alpha(Opacity=75)");var i=1+t+parseInt(this.slider[0].style.width);this.shutterRight[0].style.left=i+"px";r=parseInt(this.element.style.width);if(this.element.style.width.indexOf("%")>=0)var r=parseInt(this.host.width());var s=r-1-t-parseInt(this.slider[0].style.width);s<0&&(s=0),this.shutterRight[0].style.width=1+s+"px",i+1+s<2+r&&(this.shutterRight[0].style.width=2+s+"px"),0==s&&(this.shutterRight[0].style.width="0px")},_initRange:function(){if(this._range._from>this._range._to)throw new Error("jqxRangeSelector: range object initialization error. 'min' should be less than 'max'");return{left:this._range._from,right:this._range._to}}})}(jqxBaseFramework);

