/*
jQWidgets v5.1.0 (2017-Aug)
Copyright (c) 2011-2017 jQWidgets.
License: http://jqwidgets.com/license/
*/
!function(e){e.extend(e.jqx._jqxGrid.prototype,{_updatefilterrowui:function(t){var i=this.columns.records.length,r=0,l=this;if(this.filterrow){for(var a=0;a<i;a++){var s=this.columns.records[a],o=parseInt(s.width);o<s.minwidth&&(o=s.minwidth),o>s.maxwidth&&(o=s.maxwidth);var n=e(this.filterrow[0].cells[a]);n.css("left",r);var d=!0;if(n.width()==o&&(d=!1),t&&(d=!0),n.width(o),n[0].left=r,s.hidden&&s.hideable?n.css("display","none"):r+=o,d)if(s.createfilterwidget&&"custom"==s.filtertype)s.createfilterwidget(s,n);else if(s.filterable){var f=function(t,i){var r=e(i.children()[0]);r.width(o-10),e.jqx.browser.msie&&r.width(o-16),r.attr("disabled",t.disabled)};switch(s.filtertype){case"number":case"input":e(n.children()[0]).width(o),n.find("input").width(o-30),e.jqx.browser.msie&&n.find("input").width(o-36),n.find("input").attr("disabled",l.disabled),e(n.find(".jqx-dropdownlist-state-normal")).jqxDropDownList({theme:l.theme,disabled:l.disabled});break;case"date":case"range":this.host.jqxDateTimeInput?e(n.children()[0]).jqxDateTimeInput({theme:l.theme,disabled:l.disabled,width:o-10}):f(this,n);break;case"textbox":case"default":f(this,n);break;case"list":case"checkedlist":this.host.jqxDropDownList?e(n.children()[0]).jqxDropDownList({theme:l.theme,disabled:l.disabled,width:o-10}):f(this,n);break;case"bool":case"boolean":this.host.jqxCheckBox?e(n.children()[0]).jqxCheckBox({theme:l.theme,disabled:l.disabled}):f(this,n)}}}var c=e(this.filterrow.children()[0]);c.width(parseInt(r)+2),c.height(this.filterrowheight)}},clearfilterrow:function(t){if(this._disablefilterrow=!0,this.columns.records){for(var i=this.columns.records.length,r=0;r<i;r++){var l=this.columns.records[r],a=e(this.filterrow[0].cells[r]);if(("string"!=typeof t||l.displayfield==t)&&l.filterable){var s=function(t,i){var r=e(i.children()[0]);r.val(""),r[0]&&(t["_oldWriteText"+r[0].id]="")};switch(l.filtertype){case"number":case"input":if(a.find("input").val(""),this.host.jqxDropDownList){var o=e(e(e(a).children()[0]).children()[1]);o.jqxDropDownList("clearSelection");var n=0;if(0==n){this._getfiltersbytype("number"==l.filtertype?"number":"string");var d=(new e.jqx.filter).getoperatorsbyfiltertype("number"==l.filtertype?"numberfilter":"stringfilter");null!=l.filtercondition?-1==(n=d.indexOf(l.filtercondition.toUpperCase()))&&(n="number"==l.filtertype?0:2):n="number"==l.filtertype?0:2}o.jqxDropDownList({selectedIndex:n}),o.jqxDropDownList("ensureVisible",n)}break;case"date":case"range":this.host.jqxDateTimeInput?e(a.children()[0]).jqxDateTimeInput("setDate",null):s(this,a);break;case"textbox":case"default":s(this,a);break;case"list":this.host.jqxDropDownList?e(a.children()[0]).jqxDropDownList("clearSelection"):s(this,a);break;case"checkedlist":this.host.jqxDropDownList?e(a.children()[0]).jqxDropDownList("checkAll",!1):s(this,a);break;case"bool":case"boolean":this.host.jqxCheckBox?e(a.children()[0]).jqxCheckBox({checked:null}):s(this,a)}}}this._disablefilterrow=!1}},_applyfilterfromfilterrow:function(){if(1!=this._disablefilterrow&&!this.disabled){for(var t=this.columns.records.length,i=this.that,r=0;r<t;r++){var l=new e.jqx.filter,a=this.columns.records[r];if(a.filterable&&null!==a.datafield){var s=i._getcolumntypebydatafield(a),o=i._getfiltertype(s),n=!0,d=(a.filtertype,function(e,t,r){var l=!0;if(e._filterwidget){var a=e._filterwidget.val();if(""!=a){s="equal";if("stringfilter"==t)var s="contains";if("numericfilter"==t&&","==i.gridlocalization.decimalseparator&&a.indexOf(i.gridlocalization.decimalseparator)>=0&&(a=a.replace(i.gridlocalization.decimalseparator,".")),"stringfilter"!=t){var o=0;if(-1!=a.indexOf(">")&&(s="greater_than",o=1),-1!=a.indexOf("<")&&(s="less_than",o=1),-1!=a.indexOf("=")&&("greater_than"==s?(s="greater_than_or_equal",o=2):"less_than"==s?(s="less_than_or_equal",o=2):(s="equal",o=1)),0!=o&&(a=a.substring(o)).length<1)return!1}if(void 0!=e.filtercondition&&(s=e.filtercondition),"datefilter"==t)n=r.createfilter(t,a,s,null,e.cellsformat,i.gridlocalization);else var n=r.createfilter(t,a,s);r.addfilter(1,n)}else l=!1}return l});switch(a.filtertype){case"range":case"date":if(a._filterwidget.jqxDateTimeInput)if("range"==a.filtertype)if(null!=(u=a._filterwidget.jqxDateTimeInput("getRange"))&&null!=u.from&&null!=u.to){y="GREATER_THAN_OR_EQUAL";(h=new Date(0)).setHours(0),h.setMinutes(0),h.setFullYear(u.from.getFullYear(),u.from.getMonth(),u.from.getDate());var f=new Date(0);f.setHours(0),f.setMinutes(0),f.setFullYear(u.to.getFullYear(),u.to.getMonth(),u.to.getDate()),f.setHours(u.to.getHours()),f.setMinutes(u.to.getMinutes()),f.setSeconds(u.to.getSeconds());p=l.createfilter(o,h,y);l.addfilter(0,p);var c=l.createfilter(o,f,"LESS_THAN_OR_EQUAL");l.addfilter(0,c)}else n=!1;else if(null!=(u=a._filterwidget.jqxDateTimeInput("getDate"))){var h=new Date(0);h.setHours(0),h.setMinutes(0),h.setFullYear(u.getFullYear(),u.getMonth(),u.getDate());y="EQUAL";void 0!=a.filtercondition&&(y=a.filtercondition);var p=l.createfilter(o,h,y);l.addfilter(0,p)}else n=!1;else n=d(a,o,l);break;case"input":if(a._filterwidget){var u=a._filterwidget.find("input").val(),g=a._filterwidget.find(".filter").jqxDropDownList("selectedIndex"),m=l.getoperatorsbyfiltertype(o)[g];if(i.updatefilterconditions){void 0!=(v=i.updatefilterconditions(o,l.getoperatorsbyfiltertype(o)))&&l.setoperatorsbyfiltertype(o,v);m=l.getoperatorsbyfiltertype(o)[g]}var x="NULL"==m||"NOT_NULL"==m,w="EMPTY"==m||"NOT_EMPTY"==m;void 0!=u&&u.length>0||x||w?(p=l.createfilter(o,u,m,null,a.cellsformat,i.gridlocalization),l.addfilter(0,p)):n=!1}else n=!1;break;case"number":if(a._filterwidget){u=a._filterwidget.find("input").val();","==i.gridlocalization.decimalseparator&&u.indexOf(i.gridlocalization.decimalseparator)>=0&&(u=u.replace(i.gridlocalization.decimalseparator,"."));var g=a._filterwidget.find(".filter").jqxDropDownList("selectedIndex"),m=l.getoperatorsbyfiltertype(o)[g];if(i.updatefilterconditions){var v=i.updatefilterconditions(o,l.getoperatorsbyfiltertype(o));void 0!=v&&l.setoperatorsbyfiltertype(o,v);m=l.getoperatorsbyfiltertype(o)[g]}var x="NULL"==m||"NOT_NULL"==m,w="EMPTY"==m||"NOT_EMPTY"==m;void 0!=u&&u.length>0||x||w?(p=l.createfilter(o,new Number(u),m,null,a.cellsformat,i.gridlocalization),l.addfilter(0,p)):n=!1}else n=!1;break;case"textbox":case"default":n=d(a,o,l);break;case"bool":case"boolean":if(a._filterwidget.jqxCheckBox)if(null!=(u=a._filterwidget.jqxCheckBox("checked"))){var y="equal",b=l.createfilter(o,u,y);l.addfilter(1,b)}else n=!1;else n=d(a,o,l);break;case"list":if((q=a._filterwidget.jqxDropDownList("listBox")).selectedIndex>0){var D=q.getItem(q.selectedIndex),u=D.label,_=D.value,y="equal";""===u&&(y="NULL");b=l.createfilter(o,u,y);l.addfilter(1,b),_!==u&&(b.data=_)}else n=!1;break;case"checkedlist":if(a._filterwidget.jqxDropDownList){var q=a._filterwidget.jqxDropDownList("listBox"),j=q.getCheckedItems();if(0==j.length){for(k=1;k<q.items.length;k++){var u=q.items[k].label,_=q.items[k].value,y="not_equal";""===u&&(y="NULL");b=l.createfilter(o,u,y);_!==u&&(b.data=_),l.addfilter(0,b)}n=!0}else if(j.length!=q.items.length)for(var k=0;k<j.length;k++){var u=j[k].label,_=j[k].value,y="equal";""===u&&(y="NULL");b=l.createfilter(o,u,y);_!==u&&(b.data=_),l.addfilter(1,b)}else n=!1}else n=d(a,o,l)}this._loading||(n?this.addfilter(a.displayfield,l,!1):this.removefilter(a.displayfield,!1))}}this._loading||this.applyfilters("filterrow")}},_updatefilterrow:function(){var t=e('<div style="position: relative;" id="row00'+this.element.id+'"></div>'),i=0,r=this.columns.records.length,l=this.toThemeProperty("jqx-grid-cell");l+=" "+this.toThemeProperty("jqx-grid-cell-pinned"),l+=" "+this.toThemeProperty("jqx-grid-cell-filter-row");var a=r+10,s=new Array,o=this.that;this.filterrow[0].cells=s,t.height(this.filterrowheight),this.filterrow.children().detach(),this.filterrow.append(t),this._filterrowcache||(this._filterrowcache=new Array),this._initcolumntypes();for(var n=!1,d=new Array,f=document.createDocumentFragment(),c=0;c<r;c++){var h=this.columns.records[c],p=h.width;p<h.minwidth&&(p=h.minwidth),p>h.maxwidth&&(p=h.maxwidth);var u=document.createElement("div");u.style.overflow="hidden",u.style.position="absolute",u.style.height="100%",u.className=l,u=e(u),f.appendChild(u[0]),u[0].style.left=i+"px",this.rtl?(u.css("z-index",a++),u.css("border-left-width","1px")):u.css("z-index",a--),"auto"==p&&(p=0),u[0].style.width=parseFloat(p)+"px",u[0].left=i,h.hidden&&h.hideable?u.css("display","none"):i+=p,s[s.length]=u[0];var g=!0;if(this.rtl){if(this.groupable){m=this.showrowdetailscolumn&&this.rowdetails?1:0;this.groups.length+m+c>r-1&&(g=!1)}this.showrowdetailscolumn&&this.rowdetails&&c==r-1&&(g=!1)}else{if(this.groupable){var m=this.showrowdetailscolumn&&this.rowdetails?1:0;this.groups.length+m>c&&(g=!1)}this.showrowdetailscolumn&&this.rowdetails&&0==c&&(g=!1)}if(g)if("custom"==h.filtertype&&h.createfilterwidget){h.createfilterwidget(h,u,function(){o._applyfilterfromfilterrow()})}else h.filterable&&(this._filterrowcache[h.datafield]?(n=!0,u.append(this._filterrowcache[h.datafield]),h._filterwidget=this._filterrowcache[h.datafield]):(this._addfilterwidget(h,u,p),d[h.datafield]=h._filterwidget))}t[0].appendChild(f),this._filterrowcache=d,e.jqx.browser.msie&&e.jqx.browser.version<8&&t.css("z-index",a--),t.width(parseFloat(i)+2),this.filterrow.addClass(l),this.filterrow.css("border-top-width","1px"),this.filterrow.css("border-right-width","0px"),n&&this._updatefilterrowui(!0)},_addfilterwidget:function(t,i,r){for(var l=this.that,a="",s="",o=0;o<l.dataview.filters.length;o++){var n=l.dataview.filters[o];if(n.datafield&&n.datafield==t.datafield){o=n.filter.getfilters()[0];a=o.value,"range"===t.filtertype&&(a={from:a,to:n.filter.getfilters()[1].value}),s=o.condition,t.filtercondition=s;break}}var d=function(i,l){var s=e('<input autocomplete="off" type="textarea"/>');s[0].id=e.jqx.utilities.createId(),s.addClass(i.toThemeProperty("jqx-widget")),s.addClass(i.toThemeProperty("jqx-input")),s.addClass(i.toThemeProperty("jqx-rc-all")),s.addClass(i.toThemeProperty("jqx-widget-content")),i.rtl&&s.css("direction","rtl"),i.disabled&&s.attr("disabled",!0),s.attr("disabled",!1),s.appendTo(l),s.width(r-10),s.height(i.filterrowheight-10),s.css("margin","4px"),s.css("box-sizing","border-box"),t.createfilterwidget&&t.createfilterwidget(t,l,s),t._filterwidget=s,s.focus(function(){return i.content[0].scrollLeft=0,setTimeout(function(){i.content[0].scrollLeft=0},10),i.focusedfilter=s,s.addClass(i.toThemeProperty("jqx-fill-state-focus")),!1}),s.blur(function(){s.removeClass(i.toThemeProperty("jqx-fill-state-focus"))}),s.keydown(function(e){"13"==e.keyCode&&i._applyfilterfromfilterrow(),s[0]._writeTimer&&clearTimeout(s[0]._writeTimer),s[0]._writeTimer=setTimeout(function(){i._loading||(i["_oldWriteText"+s[0].id]||(i["_oldWriteText"+s[0].id]=""),i["_oldWriteText"+s[0].id].length>0&&i["_oldWriteText"+s[0].id]!=s.val()?(i._applyfilterfromfilterrow(),i["_oldWriteText"+s[0].id]=s.val()):0==i["_oldWriteText"+s[0].id].length&&(i._applyfilterfromfilterrow(),i["_oldWriteText"+s[0].id]=s.val()))},t.filterdelay),i.focusedfilter=s}),i.host.removeClass("jqx-disableselect"),i.content.removeClass("jqx-disableselect"),s.val(a)};switch(null!=t.datatype&&("number"==t.filtertype&&("string"!=t.datatype&&"date"!=t.datatype&&"bool"!=t.datatype||(t.filtertype="textbox")),"date"==t.filtertype&&("string"!=t.datatype&&"number"!=t.datatype&&"bool"!=t.datatype||(t.filtertype="textbox")),"bool"==t.filtertype&&("string"!=t.datatype&&"number"!=t.datatype&&"date"!=t.datatype||(t.filtertype="textbox"))),t.filtertype){case"number":case"input":var f=e("<div></div>");f.width(i.width()),f.height(this.filterrowheight),i.append(f);!function(i,r,s){var o=e('<input style="float: left;" autocomplete="off" type="textarea"/>');l.rtl&&(o.css("float","right"),o.css("direction","rtl")),o[0].id=e.jqx.utilities.createId(),o.addClass(l.toThemeProperty("jqx-widget jqx-input jqx-rc-all jqx-widget-content")),o.appendTo(i),o.width(r-16),l.disabled&&o.attr("disabled",!0),o.attr("disabled",!1),o.height(l.filterrowheight-10),o.css("margin","4px"),o.css("margin-right","2px"),o.focus(function(){l.focusedfilter=o,o.addClass(l.toThemeProperty("jqx-fill-state-focus"))}),o.blur(function(){o.removeClass(l.toThemeProperty("jqx-fill-state-focus"))}),o.keydown(function(e){"13"==e.keyCode&&l._applyfilterfromfilterrow(),o[0]._writeTimer&&clearTimeout(o[0]._writeTimer),o[0]._writeTimer=setTimeout(function(){l._loading||l["_oldWriteText"+o[0].id]!=o.val()&&(l._applyfilterfromfilterrow(),l["_oldWriteText"+o[0].id]=o.val())},t.filterdelay),l.focusedfilter=o}),o.val(a)}(f,r=i.width()-21);var c=l._getfiltersbytype("number"==t.filtertype?"number":"string");(v=e("<div class='filter' style='float: left;'></div>")).css("margin-top","4px"),v.appendTo(f),l.rtl&&v.css("float","right");var h=0;null!=t.filtercondition&&-1!=(p=(o=new e.jqx.filter).getoperatorsbyfiltertype("number"==t.filtertype?"numericfilter":"stringfilter").indexOf(t.filtercondition.toUpperCase()))&&(h=p);D=180;if("input"==t.filtertype&&(D=240,0==h)){var p=c.indexOf("contains")||2;-1!=p&&null==t.filtercondition&&(h=p)}v.jqxDropDownList({disabled:l.disabled,touchMode:l.touchmode,rtl:l.rtl,dropDownHorizontalAlignment:"right",enableBrowserBoundsDetection:!0,selectedIndex:h,width:18,height:21,dropDownHeight:150,dropDownWidth:D,source:c,theme:l.theme}),v.jqxDropDownList({selectionRenderer:function(e){return""}}),v.jqxDropDownList("setContent",""),v.find(".jqx-dropdownlist-content").hide(),t.createfilterwidget&&t.createfilterwidget(t,i,f),t._filterwidget=f;var u=null;this.addHandler(v,"select",function(){var e=v.jqxDropDownList("getSelectedItem").label;t._filterwidget.find("input").val().length>0&&!l.refreshingfilter&&l._applyfilterfromfilterrow(),"input"!=t.filtertype||l.refreshingfilter?0!=t._filterwidget.find("input").val().length||l.refreshingfilter||"null"!=u&&"not null"!=u&&"null"!=e&&"not null"!=e||l._applyfilterfromfilterrow():l._applyfilterfromfilterrow(),u=e});break;case"textbox":case"default":default:d(this,i);break;case"none":break;case"date":case"range":if(this.host.jqxDateTimeInput){var g=e("<div></div>");g.css("margin","4px"),g.appendTo(i);var m={calendar:this.gridlocalization,todayString:this.gridlocalization.todaystring,clearString:this.gridlocalization.clearstring};g.jqxDateTimeInput({firstDayOfWeek:this.gridlocalization.firstDay,readonly:!0,disabled:l.disabled,localization:m,rtl:l.rtl,showFooter:!0,formatString:t.cellsformat,selectionMode:t.filtertype,value:null,theme:this.theme,width:r-10,height:this.filterrowheight-10}),t.createfilterwidget&&t.createfilterwidget(t,i,g),a&&a.from?g.jqxDateTimeInput("setRange",a.from,a.to):a&&a.toString().length>1&&g.val(a),t._filterwidget=g,this.addHandler(g,"valueChanged",function(e){l.refreshingfilter||(l._applyfilterfromfilterrow(),l.focusedfilter=null)})}else d(this,i);break;case"list":case"checkedlist":if(this.host.jqxDropDownList){var x=this._getfilterdataadapter(t),w=!1,v=e("<div></div>");v.css("margin","4px");var y=t.datafield,b="checkedlist"==t.filtertype,D=r<150?220:"auto";x.dataBind();var _=x.records.length<8;w=_,v.appendTo(i),v.jqxDropDownList({placeHolder:l.gridlocalization.filterchoosestring,disabled:l.disabled,touchMode:l.touchmode,rtl:l.rtl,checkboxes:b,dropDownWidth:D,source:x.records,autoDropDownHeight:_,theme:this.theme,width:r-10,height:this.filterrowheight-10,displayMember:t.displayfield,valueMember:y}),t.createfilterwidget&&t.createfilterwidget(t,i,v);var q=v.jqxDropDownList("listBox");if(b){v.jqxDropDownList({selectionRenderer:function(){return'<span class="'+l.toThemeProperty("jqx-item")+'" style="top: 2px; position: relative; color: inherit; border: none; background-color: transparent;">'+l.gridlocalization.filterselectstring+"</span>"}});var j=e('<span style="top: 2px; position: relative; color: inherit; border: none; background-color: transparent;">'+l.gridlocalization.filterselectstring+"</span>");if(j.addClass(this.toThemeProperty("jqx-item")),void 0!=q){w||q.host.height(200),q.insertAt(l.gridlocalization.filterselectallstring,0),v.jqxDropDownList("setContent",j);var k=!0;new Array;q.checkAll(!1),l.addHandler(q.host,"checkChange",function(e){if(v[0]._selectionChanged=!0,k)if(e.args.label!=l.gridlocalization.filterselectallstring){k=!1,q.host.jqxListBox("checkIndex",0,!0,!1);var t=q.host.jqxListBox("getCheckedItems"),i=q.host.jqxListBox("getItems");1==t.length?q.host.jqxListBox("uncheckIndex",0,!0,!1):i.length!=t.length&&q.host.jqxListBox("indeterminateIndex",0,!0,!1),k=!0}else k=!1,e.args.checked?q.host.jqxListBox("checkAll",!1):q.host.jqxListBox("uncheckAll",!1),k=!0})}}else q.insertAt({label:this.gridlocalization.filterchoosestring,value:""},0),v.jqxDropDownList({selectedIndex:0});t._filterwidget=v;v.jqxDropDownList("dropdownlistWrapper");"list"==t.filtertype?this.addHandler(v,"select",function(e){l.refreshingfilter||e.args&&"none"!=e.args.type&&(l._applyfilterfromfilterrow(),l.focusedfilter=null)}):this.addHandler(v,"close",function(e){v[0]._selectionChanged&&(l._applyfilterfromfilterrow(),l.focusedfilter=null,v[0]._selectionChanged=!1)})}else d(this,i);break;case"bool":case"boolean":if(this.host.jqxCheckBox){var L=e('<div tabIndex=0 style="opacity: 0.99; position: absolute; top: 50%; left: 50%; margin-top: -7px; margin-left: -10px;"></div>');L.appendTo(i),L.jqxCheckBox({disabled:l.disabled,enableContainerClick:!1,animationShowDelay:0,animationHideDelay:0,hasThreeStates:!0,theme:this.theme,checked:null}),t.createfilterwidget&&t.createfilterwidget(t,i,L),!0===a||"true"==a?L.jqxCheckBox({checked:!0}):!1!==a&&"false"!=a||L.jqxCheckBox({checked:!1}),t._filterwidget=L,this.addHandler(L,"change",function(e){l.refreshingfilter||e.args&&(l.focusedfilter=null,l._applyfilterfromfilterrow())})}else d(this,i)}},_getfilterdataadapter:function(t){if(!!this.source._source){var i={localdata:e.extend(!0,{},this.source.records),datatype:this.source.datatype,async:!1},r=this;dataadapter=new e.jqx.dataAdapter(i,{autoBind:!1,autoSort:!0,autoSortField:t.displayfield,async:!1,uniqueDataFields:[t.displayfield],beforeLoadComplete:function(e){var i=new Array;if(t.cellsformat){for(var l=r._getcolumntypebydatafield(t),a=0;a<e.length;a++){i.push(e[a]);var s=e[a][t.displayfield];e[a][t.displayfield+"JQValue"]=s,"date"===l?e[a][t.displayfield]=null!=s?dataadapter.formatDate(s,t.cellsformat,r.gridlocalization):"":"number"!==l&&"float"!==l&&"int"!==l||(e[a][t.displayfield]=null!=s?dataadapter.formatNumber(s,t.cellsformat,r.gridlocalization):"")}return i}return e}})}else dataadapter=new e.jqx.dataAdapter(this.source,{autoBind:!1,uniqueDataFields:[t.displayfield],autoSort:!0,autoSortField:t.displayfield,async:!1});if(t.filteritems&&t.filteritems.length>0){i={localdata:t.filteritems,datatype:this.source.datatype,async:!1};dataadapter=new e.jqx.dataAdapter(i,{autoBind:!1,async:!1})}else if(t.filteritems){if(t.filteritems._source)return t.filteritems._options.autoBind=!1,t.filteritems._options.async=!1,t.filteritems;if(e.isFunction(t.filteritems))return t.filteritems()}return dataadapter},refreshfilterrow:function(){if(this.showfilterrow){this.refreshingfilter=!0,this._updatefilterrowui(),this._updatelistfilters(!0,!0);for(var t=this.that,i=this.columns.records.length,r=0;r<i;r++){var l=this.columns.records[r];if(l.filterable&&l.filter){var a=l.filter.getfilters();if(a.length>0){var s=a[0].value,o=l._filterwidget,n=l._filterwidget.parent();if(null!=o)switch(l.filtertype){case"number":if(n.find("input").val(s),this.host.jqxDropDownList){d=l.filter.getoperatorsbyfiltertype("numericfilter");o.find(".filter").jqxDropDownList("selectIndex",d.indexOf(a[0].condition))}break;case"input":if(n.find("input").val(s),this.host.jqxDropDownList){var d=l.filter.getoperatorsbyfiltertype("stringfilter");o.find(".filter").jqxDropDownList("selectIndex",d.indexOf(a[0].condition))}break;case"date":case"range":if(this.host.jqxDateTimeInput){if(void 0!=(s=l.filter.getfilterat(0).filtervalue)){if(l.filter.getfilterat(1))var f=l.filter.getfilterat(1).filtervalue;else f=s;"range"==l.filtertype?e(n.children()[0]).jqxDateTimeInput("setRange",new Date(s),new Date(f)):e(n.children()[0]).jqxDateTimeInput("setDate",new Date(s))}}else o.val(s);break;case"textbox":case"default":o.val(s),t["_oldWriteText"+o[0].id]=s;break;case"bool":case"boolean":this.host.jqxCheckBox?e(n.children()[0]).jqxCheckBox({checked:s}):o.val(s)}}}}this.refreshingfilter=!1}},_destroyedfilters:function(){this.that;for(var t=this.columns.records.length,i=0;i<t;i++){var r=this.columns.records[i];if(r.filterable){var l=r._filterwidget;if("list"==r.filtertype||"checkedlist"==r.filtertype)this.removeHandler(l,"select"),this.removeHandler(l,"close"),l.jqxDropDownList("destroy");else if("date"==r.filtertype||"range"==r.filtertype)this.removeHandler(l,"valueChanged"),l.jqxDateTimeInput("destroy");else if("bool"==r.filtertype)this.removeHandler(l,"change"),l.jqxCheckBox("destroy");else if("number"==r.filtertype||"input"===r.filtertype){var a=l.find(".jqx-input");this.removeHandler(a,"keydown"),e(l.children()[1]).jqxDropDownList("destroy")}else this.removeHandler(l,"keydown");l.remove()}}},_updatelistfilters:function(t,i){for(var r=this.that,l=this.columns.records.length,a=0;a<l;a++){var s=this.columns.records[a];if(s.filterable&&("list"==s.filtertype||"checkedlist"==s.filtertype)){var o=s._filterwidget;if(t){var n=this._getfilterdataadapter(s);o.jqxDropDownList({source:n});var d=!0;if((c=o.jqxDropDownList("getItems")).length!=n.records.length+1&&(d=!1),d)for(g=1;g<c.length;g++)if(c[g].label!=n.records[g-1][s.displayfield]){d=!1;break}if(d&&!i)continue}else if(void 0==s.filter){o.jqxDropDownList("renderSelection");continue}var f="checkedlist"==s.filtertype,c=o.jqxDropDownList("getItems"),h=o.jqxDropDownList("listBox");if(o.jqxDropDownList("dataBind"),f){o.jqxDropDownList({selectionRenderer:function(){return r.gridlocalization.filterselectstring}}),null==h.getItem(this.gridlocalization.filterselectallstring)&&h.insertAt(this.gridlocalization.filterselectallstring,0);var p=e('<span style="top: 2px; position: relative; color: inherit; border: none; background-color: transparent;">'+this.gridlocalization.filterselectstring+"</span>");if(p.addClass(this.toThemeProperty("jqx-item")),o.jqxDropDownList("setContent",p),h.checkAll(!1),s.filter){for(var u=s.filter.getfilters(),g=0;g<h.items.length;g++){var m=h.items[g].label,x=void 0;e.each(u,function(){var e;"NOT_EQUAL"==this.condition?e=m!=this.value:"EQUAL"==this.condition&&(e=m==this.value),x=void 0==x&&void 0!==e?e:"EQUAL"==this.condition?x||e:x&&e}),x?h.checkIndex(g,!1,!1):h.uncheckIndex(g,!1,!1)}h._updateCheckedItems();var w=h.getCheckedItems().length;h.items.length!=w&&w>0&&h.host.jqxListBox("indeterminateIndex",0,!0,!1)}}else if(null==h.getItem(this.gridlocalization.filterselectallstring)&&h.insertAt({label:this.gridlocalization.filterchoosestring,value:""},0),o.jqxDropDownList({selectedIndex:0}),s.filter){for(var u=s.filter.getfilters(),v=-1,g=0;g<h.items.length;g++){m=h.items[g].label;e.each(u,function(){return"NOT_EQUAL"==this.condition||(m==this.value?(v=g,!1):void 0)})}-1!=v&&h.selectIndex(v)}c.length<8?o.jqxDropDownList("autoDropDownHeight",!0):o.jqxDropDownList("autoDropDownHeight",!1)}}},_renderfiltercolumn:function(){var t=this.that;if(this.filterable){if(!this.columns.records)return;e.each(this.columns.records,function(i,r){var l=!1;t.autoshowfiltericon?this.filter?(e(this.filtericon).show(),l=!0):e(this.filtericon).hide():this.filterable&&(e(this.filtericon).show(),l=!0),"right"!=this.align||this.renderer||this.element&&(this.element.firstChild.firstChild.style.marginRight=l?"18px":"2px")})}},_initcolumntypes:function(){if(this.columns&&this.columns.records){var t=this.source._source.datafields;if(t)for(var i=0;i<this.columns.records.length;i++){var r=this.columns.records[i];if(!r.datatype){var l="";e.each(t,function(){if(this.name==r.displayfield)return this.type&&(l=this.type),!1}),r.datatype=""!=l?l:""}}}},_getcolumntypebydatafield:function(t){var i=this.that,r="string",l=i.source.datafields||(i.source._source?i.source._source.datafields:null);if(l){var a="";if(e.each(l,function(){if(this.name==t.displayfield)return this.type&&(a=this.type),!1}),a)return a}if(null!=t){if(void 0==this.dataview.cachedrecords)return r;var s=null;if(this.virtualmode)e.each(this.dataview.cachedrecords,function(){return s=this[t.displayfield],!1});else{if(0==this.dataview.cachedrecords.length)return r;if(null!=(s=this.dataview.cachedrecords[0][t.displayfield])&&""==s.toString())return"string"}if(null!=s)if("boolean"==typeof s)r="boolean";else if(e.jqx.dataFormat.isNumber(s))r="number";else{var o=new Date(s);if("NaN"==o.toString()||"Invalid Date"==o.toString())if(e.jqx.dataFormat){if(null!=(o=e.jqx.dataFormat.tryparsedate(s))){if(o&&o.getFullYear()&&1970==o.getFullYear()&&0==o.getMonth()&&1==o.getDate()){var n=new Number(s);return isNaN(n)?"string":"number"}return"date"}r="string"}else r="string";else r="date"}}return r},_getfiltersbytype:function(e){var t=this.that,i="";switch(e){case"number":case"float":case"int":i=t.gridlocalization.filternumericcomparisonoperators;break;case"date":i=t.gridlocalization.filterdatecomparisonoperators;break;case"boolean":case"bool":i=t.gridlocalization.filterbooleancomparisonoperators;break;case"string":default:i=t.gridlocalization.filterstringcomparisonoperators}return i},_getfiltertype:function(e){var t="stringfilter";switch(e){case"number":case"int":case"float":case"decimal":t="numericfilter";break;case"boolean":case"bool":t="booleanfilter";break;case"date":case"time":case"range":t="datefilter";break;case"string":case"input":t="stringfilter"}return t},_buildfilter:function(t,i,r){var l=e(i).find(".filter1"),a=e(i).find(".filter2"),s=e(i).find(".filter3"),o=e(i).find(".filtertext1"+t.element.id),n=e(i).find(".filtertext2"+t.element.id),d=o.val(),f=n.val(),c=t._getcolumntypebydatafield(r),h=(t._getfiltersbytype(c),new e.jqx.filter),p=t._getfiltertype(c);if("default"===t.filtermode&&"list"!==r.filtertype&&"checkedlist"!==r.filtertype){var u=l.jqxDropDownList("selectedIndex"),g=a.jqxDropDownList("selectedIndex"),m=s.jqxDropDownList("selectedIndex"),x=null,w=null;if(t.updatefilterconditions){var v=t.updatefilterconditions(p,h.getoperatorsbyfiltertype(p));void 0!=v&&h.setoperatorsbyfiltertype(p,v)}var y=!1,b=h.getoperatorsbyfiltertype(p)[u],s=h.getoperatorsbyfiltertype(p)[m],D="NULL"==b||"NOT_NULL"==b,_="EMPTY"==b||"NOT_EMPTY"==b;void 0==b&&(b=h.getoperatorsbyfiltertype(p)[0]),void 0==s&&(s=h.getoperatorsbyfiltertype(p)[0]),(d.length>0||D||_)&&(x=h.createfilter(p,d,b,null,r.cellsformat,t.gridlocalization),h.addfilter(g,x),y=!0);var q="NULL"==s||"NOT_NULL"==s,j="EMPTY"==s||"NOT_EMPTY"==s;if((f.length>0||q||j)&&(w=h.createfilter(p,f,s,null,r.cellsformat,t.gridlocalization),h.addfilter(g,w),y=!0),y){A=r.displayfield;this.addfilter(A,h,!0)}else this._clearfilter(t,i,r)}else if("excel"===t.filtermode||"list"===r.filtertype||"checkedlist"===r.filtertype){var k=!1,L=l.data().jqxListBox.instance,T="excel"===this.filtermode||"checkedlist"===r.filtertype,I=L.getCheckedItems();if(!T)I=L.getSelectedItems();if(0==I.length){for(C=1;C<L.items.length;C++){void 0===(B=L.items[C].value)&&(B="");z="not_equal";if(B&&B.indexOf&&(B.indexOf("|")>=0||B.indexOf(" AND ")>=0||B.indexOf(" OR ")>=0||B.indexOf(" and ")>=0||B.indexOf(" or ")>=0)){B=(B=(B=(B=(B=B.replace("|","")).replace("AND","")).replace("OR","")).replace("and","")).replace("or","");z="equal"}if("datefilter"==p)H=h.createfilter(p,B,z,null,r.cellsformat,t.gridlocalization);else H=h.createfilter(p,B,z,null);h.addfilter(0,H)}k=!0}else if(I.length!=L.items.length){k=!0;for(var C=0;C<I.length;C++)if(t.gridlocalization.filterselectallstring!==I[C].value){var B=I[C].value;void 0===B&&(B="");var z="equal";if("datefilter"==p)H=h.createfilter(p,B,z,null,r.cellsformat,t.gridlocalization);else var H=h.createfilter(p,B,z,null);h.addfilter(1,H)}}else k=!1;if(k){A=r.displayfield;this.addfilter(A,h,!0)}else{var A=r.displayfield;this.removefilter(A,!0)}}},_clearfilter:function(e,t,i){var r=i.displayfield;this.removefilter(r,!0)},addfilter:function(e,t,i){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);var r=this.getcolumn(e),l=this._getcolumn(e);void 0!=r&&null!=r&&(r.filter=t,l.filter=t,this.dataview.addfilter(e,t),1==i&&void 0!=i&&this.applyfilters("add"))},removefilter:function(e,t){if(this._loading)throw new Error("jqxGrid: "+this.loadingerrormessage);var i=this.getcolumn(e),r=this._getcolumn(e);void 0!=i&&null!=i&&null!=i.filter&&(this.dataview.removefilter(e,i.filter),i.filter=null,r.filter=null,this.showfilterrow&&this.clearfilterrow(e),1!=t&&!1===t||this.applyfilters("remove"))},applyfilters:function(t){if(this.dataview.filters.length>=0&&(this.virtualmode||!this.source.localdata)&&null!=this.source&&this.source.filter){var i=-1;this.pageable?(i=this.dataview.pagenum,this.dataview.pagenum=0):(this.vScrollInstance.setPosition(0),this.loadondemand=!0,this._renderrows(this.virtualsizeinfo)),this.pageable&&this.virtualmode&&(this.dataview.pagenum=0),this.source.filter(this.dataview.filters,this.dataview.records,this.dataview.records.length),this.pageable&&!this.virtualmode&&(this.dataview.pagenum=i)}if(this._cellscache=new Array,this.dataview.clearsortdata&&this.dataview.clearsortdata(),this.virtualmode)return this.pageable&&(this.dataview.updateview(),this.gotopage&&this.gotopage(0)),this.rendergridcontent(!1,!1),this.showfilterrow&&"string"!=typeof t&&e.isEmptyObject(t)&&this.refreshfilterrow(),this._postrender("filter"),void this._raiseEvent(13,{filters:this.dataview.filters});this.selectedrowindexes,this.that;if(this.dataview.refresh(),this.dataview.clearsortdata&&this.sortcolumn&&this.sortdirection){var r=this.sortdirection.ascending?"asc":"desc";this._loading?this.sortby(this.sortcolumn,r,null,!1,!1):this.sortby(this.sortcolumn,r,null,!1)}this.pageable&&(this.dataview.updateview(),this.gotopage&&(this.gotopage(0),this.updatepagerdetails())),this._updaterowsproperties(),!this.groupable||this.groupable&&0==this.groups.length?(this._rowdetailscache=new Array,this.virtualsizeinfo=null,this._pagescache=new Array,this.columns&&this.columns.records&&this.columns.records.length>0&&!this.columns.records[0].filtericon&&(this.prerenderrequired=!0),this.rendergridcontent(!0,!1),this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo),this.showaggregates&&this._updatecolumnsaggregates&&this._updatecolumnsaggregates(),this._postrender("filter")):(this._rowdetailscache=new Array,this._render(!0,!0,!1,!1,!1),this.showfilterrow&&this._updatefocusedfilter(),this._updatecolumnwidths(),this._updatecellwidths(),this._renderrows(this.virtualsizeinfo),this._postrender("filter")),this.showfilterrow&&"string"!=typeof t&&e.isEmptyObject(t)&&this.refreshfilterrow(),this._raiseEvent(13,{filters:this.dataview.filters})},getfilterinformation:function(){for(var e=new Array,t=0;t<this.dataview.filters.length;t++){var i=this.getcolumn(this.dataview.filters[t].datafield);e[t]={filter:this.dataview.filters[t].filter,datafield:i.datafield,displayfield:i.displayfield,filtercolumn:i.datafield,filtercolumntext:i.text}}return e},clearfilters:function(t){var i=this.that;if(this.showfilterrow&&this.clearfilterrow(),this.columns.records){var r=1==t||!1!==t;e.each(this.columns.records,function(){i.removefilter(this.displayfield,!r)})}!1!==t&&(1!=t&&!1===t||this.applyfilters("clear"))},_destroyfilterpanel:function(){var t=e(e.find("#filterclearbutton"+this.element.id)),i=e(e.find("#filterbutton"+this.element.id)),r=e(e.find("#filter1"+this.element.id)),l=e(e.find("#filter2"+this.element.id)),a=e(e.find("#filter3"+this.element.id)),s=e(e.find(".filtertext1"+this.element.id)),o=e(e.find(".filtertext2"+this.element.id));s.length>0&&o.length>0&&(s.removeClass(),o.removeClass(),s.remove(),o.remove()),t.length>0&&(t.jqxButton("destroy"),i.jqxButton("destroy"),this.removeHandler(t,"click"),this.removeHandler(i,"click")),r.length>0&&r.jqxDropDownList("destroy"),l.length>0&&l.jqxDropDownList("destroy"),a.length>0&&a.jqxDropDownList("destroy");var r=e(e.find("#filter1"+this.element.id+"ex")),l=e(e.find("#filter2"+this.element.id+"ex")),a=e(e.find("#filter3"+this.element.id+"ex"));r.length>0&&r.jqxDropDownList("destroy"),l.length>0&&l.jqxDropDownList("destroy"),a.length>0&&a.jqxDropDownList("destroy")},_updatefilterpanel:function(t,i,r){null!=t&&void 0!=t||(t=this);var l=t._getcolumntypebydatafield(r),a=t._getfiltersbytype(l);if(!t.host.jqxDropDownList)throw new Error("jqxGrid: Missing reference to jqxdropdownlist.js.");t.filterpanel.detach(),t.excelfilterpanel.detach(),r.filterpanel&&r.filterpanel.detach(),e(i).children().detach();var s=e(t.menuitemsarray[6]);if(e(s).css("height","190px"),r.createfilterpanel&&!r.filterpanel){var o=e("<div class='filter' style='margin-left: 7px;'></div>");e(i).append(o),r.createfilterpanel(r.displayfield,o),r.filterpanel=o}"list"===r.filtertype||"checkedlist"===r.filtertype?e(i).append(t.excelfilterpanel):"custom"!==r.filtertype?e(i).append(t.filterpanel):r.filterpanel&&e(i).append(r.filterpanel);var n=e(i),d=n.find("#filterclearbutton"+t.element.id),f=n.find("#filterbutton"+t.element.id),c=n.find(".filter1"),h=n.find(".filter2"),p=n.find(".filter3"),u=n.find(".filtertext1"+t.element.id),g=n.find(".filtertext2"+t.element.id);if(this._hasdatefilter&&"list"!==r.filtertype&&"checkedlist"!==r.filtertype&&"custom"!==r.filtertype){var m=u.parent(),x=g.parent();if(m.children().remove(),x.children().remove(),"date"==r.filtertype){t._showwhere.text(t.gridlocalization.filtershowrowdatestring);v=e("<div class='filtertext1"+t.element.id+"' style='margin-top: 3px; margin-bottom: 3px;'></div>");m.append(v),(w=function(e){var i={calendar:t.gridlocalization,todayString:t.gridlocalization.todaystring,clearString:t.gridlocalization.clearstring};e.jqxDateTimeInput({disabled:t.disabled,firstDayOfWeek:t.gridlocalization.firstDay,localization:i,rtl:t.rtl,width:t._filterpanelwidth-15,height:23,value:null,formatString:r.cellsformat,theme:t.theme})})(v);v=e("<div class='filtertext2"+t.element.id+"' style='margin-top: 3px; margin-bottom: 3px;'></div>");x.append(v),w(v)}else{t._showwhere.text(t.gridlocalization.filtershowrowstring);v=e("<input class='filtertext1"+t.element.id+"' style='height: 23px; margin-top: 3px; margin-bottom: 3px;' type='text'></input>");m.append(v);var w=function(e){e.addClass(t.toThemeProperty("jqx-input")),e.addClass(t.toThemeProperty("jqx-widget-content")),e.addClass(t.toThemeProperty("jqx-rc-all")),e.width(t._filterpanelwidth-21)};w(v);var v=e("<input class='filtertext2"+t.element.id+"' style='height: 23px; margin-top: 3px; margin-bottom: 3px;' type='text'></input>");x.append(v),w(v)}var u=n.find(".filtertext1"+t.element.id),g=n.find(".filtertext2"+t.element.id)}if("date"!=r.filtertype?(u.val(""),g.val("")):(u.val(null),g.val(null)),this.removeHandler(f,"click"),this.addHandler(f,"click",function(){t._buildfilter(t,i,r),t._closemenu()}),this.removeHandler(d,"click"),this.addHandler(d,"click",function(){t._clearfilter(t,i,r),t._closemenu()}),this.removeHandler(f,"keydown"),this.addHandler(f,"keydown",function(e){13===e.keyCode&&(t._buildfilter(t,i,r),t._closemenu())}),this.removeHandler(d,"keydown"),this.addHandler(d,"keydown",function(e){13===e.keyCode&&(t._clearfilter(t,i,r),t._closemenu())}),this.removeHandler(u,"keydown"),this.addHandler(u,"keydown",function(e){13===e.keyCode&&f.trigger("click"),27===e.keyCode&&t._closemenu()}),this.removeHandler(g,"keydown"),this.addHandler(g,"keydown",function(e){13===e.keyCode&&f.trigger("click"),27===e.keyCode&&t._closemenu()}),"default"===this.filtermode&&"list"!==r.filtertype&&"checkedlist"!==r.filtertype&&"custom"!==r.filtertype){if(c.jqxDropDownList("source")!=a&&(c.jqxDropDownList({enableBrowserBoundsDetection:!1,source:a}),p.jqxDropDownList({enableBrowserBoundsDetection:!1,source:a})),"boolean"==l||"bool"==l)c.jqxDropDownList({autoDropDownHeight:!0,selectedIndex:0}),p.jqxDropDownList({autoDropDownHeight:!0,selectedIndex:0});else{var y=!1;a&&a.length&&a.length<5&&(y=!0),c.jqxDropDownList({autoDropDownHeight:y,selectedIndex:2}),p.jqxDropDownList({autoDropDownHeight:y,selectedIndex:2})}h.jqxDropDownList({selectedIndex:0});var b=r.filter,D=new e.jqx.filter,_="";switch(l){case"number":case"int":case"float":case"decimal":_="numericfilter",q=D.getoperatorsbyfiltertype("numericfilter");break;case"boolean":case"bool":_="booleanfilter",q=D.getoperatorsbyfiltertype("booleanfilter");break;case"date":case"time":_="datefilter",q=D.getoperatorsbyfiltertype("datefilter");break;case"string":_="stringfilter",q=D.getoperatorsbyfiltertype("stringfilter")}if(null!=b){var m=b.getfilterat(0),x=b.getfilterat(1);b.getoperatorat(0);if(t.updatefilterconditions){var q=[],j=t.updatefilterconditions(_,q);if(void 0!=j){for(var k=0;k<j.length;k++)j[k]=j[k].toUpperCase();b.setoperatorsbyfiltertype(_,j),q=j}}if(null!=m){var L=q.indexOf(m.comparisonoperator),T=m.filtervalue;u.val(T),c.jqxDropDownList({selectedIndex:L,animationType:"default"})}if(null!=x){var I=q.indexOf(x.comparisonoperator),C=x.filtervalue;g.val(C),p.jqxDropDownList({selectedIndex:I,animationType:"default"})}void 0==b.getoperatorat(0)?h.jqxDropDownList({selectedIndex:0,animationType:"default"}):"and"==b.getoperatorat(0)||0==b.getoperatorat(0)?h.jqxDropDownList({selectedIndex:0}):h.jqxDropDownList({selectedIndex:1})}t.updatefilterpanel&&t.updatefilterpanel(c,p,h,u,g,f,d,b,_,q),(!this._hasdatefilter||this._hasdatefilter&&"date"!=r.filtertype)&&(this.touchdevice||(u.focus(),setTimeout(function(){u.focus()},10)))}else if("excel"===this.filtermode||"list"===r.filtertype||"checkedlist"===r.filtertype){var B=t._getfilterdataadapter(r),_=t._getfiltertype(l),z="excel"===this.filtermode||"checkedlist"===r.filtertype;if(c.jqxListBox("focus"),this.removeHandler(c,"keyup"),this.addHandler(c,"keyup",function(e){13===e.keyCode&&f.trigger("click"),27===e.keyCode&&t._closemenu()}),r.cellsformat?c.jqxListBox({checkboxes:z,displayMember:r.displayfield,valueMember:r.displayfield+"JQValue",source:B}):c.jqxListBox({checkboxes:z,displayMember:r.displayfield,valueMember:r.displayfield,source:B}),z){c.jqxListBox("insertAt",t.gridlocalization.filterselectallstring,0),(P=c.data().jqxListBox.instance).checkAll(!1);if(r.filter){P.uncheckAll(!1);for(var H=r.filter.getfilters(),A=0;A<P.items.length;A++){N=P.items[A].value;e.each(H,function(){if("NOT_EQUAL"==this.condition){if(N!=this.value)return P.uncheckIndex(A,!1,!1),!1;if(null!=N&&null!=this.value&&N.toString()!=this.value.toString())return P.uncheckIndex(A,!1,!1),!1}else if("EQUAL"==this.condition){if(N==this.value)return P.checkIndex(A,!1,!1),!1;if(null!=N&&null!=this.value&&N.toString()==this.value.toString())return P.checkIndex(A,!1,!1),!1}})}P._updateCheckedItems();var O=P.getCheckedItems().length;P.items.length!=O&&O>0&&P.host.jqxListBox("indeterminateIndex",0,!0,!1),O===P.items.length-1&&P.host.jqxListBox("checkIndex",0,!0,!1)}}else if(r.filter){var P=c.data().jqxListBox.instance;P.clearSelection();for(var H=r.filter.getfilters(),A=0;A<P.items.length;A++){var N=P.items[A].value;e.each(H,function(){if("NOT_EQUAL"==this.condition){if(N!=this.value)return P.unselectIndex(A,!1,!1),!1}else if("EQUAL"==this.condition&&N==this.value)return P.selectIndex(A,!0,!1),!1})}P._renderItems()}}},_initfilterpanel:function(t,i,r,l,a){null!=t&&void 0!=t||(t=this),i[0].innerHTML="";var s=e("<div class='filter' style='margin-left: 7px;'></div>");i.append(s);var o=e("<div class='filter' style='margin-top: 3px; margin-bottom: 3px;'></div>");o.text(t.gridlocalization.filtershowrowstring),this._showwhere=o;var n=a?"ex":"",d=e("<div class='filter filter1' id='filter1"+t.element.id+n+"'></div>"),f=e("<div class='filter filter2' id='filter2"+t.element.id+n+"' style='margin-bottom: 3px;'></div>"),c=e("<div class='filter filter3' id='filter3"+t.element.id+n+"'></div>"),h=t._getcolumntypebydatafield(r);if(!d.jqxDropDownList)throw new Error("jqxGrid: jqxdropdownlist.js is not loaded.");var p=t._getfiltersbytype(h);if(this._hasdatefilter=!1,this._filterpanelwidth=l,this.columns&&this.columns.records){for(u=0;u<this.columns.records.length;u++)if("date"==this.columns.records[u].filtertype){this._hasdatefilter=!0;break}}else if(this.columns&&!this.columns.records)for(var u=0;u<this.columns.length;u++)if("date"==this.columns[u].filtertype){this._hasdatefilter=!0;break}var g=e("<div class='filter'><input class='filtertext1"+t.element.id+"' style='height: 23px; margin-top: 3px; margin-bottom: 3px;' type='text'></input></div>"),m=g.find("input");m.addClass(this.toThemeProperty("jqx-input")),m.addClass(this.toThemeProperty("jqx-widget-content")),m.addClass(this.toThemeProperty("jqx-rc-all")),m.width(l-21);var x=e("<div class='filter'><input class='filtertext2"+t.element.id+"' style='height: 23px; margin-top: 3px;' type='text'></input></div>"),w=x.find("input");w.addClass(this.toThemeProperty("jqx-input")),w.addClass(this.toThemeProperty("jqx-widget-content")),w.addClass(this.toThemeProperty("jqx-rc-all")),w.width(l-21),t.rtl&&(m.css("direction","rtl"),w.css("direction","rtl"));var v=e("<div class='filter' style='height: 25px; margin-left: 20px; margin-top: 7px;'></div>"),y=e('<span tabIndex=0 id="filterbutton'+t.element.id+'" class="filterbutton" style="padding: 4px 12px; margin-left: 2px;">'+t.gridlocalization.filterstring+"</span>");v.append(y);var b=e('<span tabIndex=0 id="filterclearbutton'+t.element.id+'" class="filterclearbutton" style="padding: 4px 12px; margin-left: 5px;">'+t.gridlocalization.filterclearstring+"</span>");v.append(b),y.jqxButton({height:20,theme:t.theme}),b.jqxButton({height:20,theme:t.theme});var D=function(e){if(e){if(-1!=e.text().indexOf("case sensitive")){var i=e.text();i=i.replace("case sensitive","match case"),e.text(i)}return e.css("font-family",t.host.css("font-family")),e.css("font-size",t.host.css("font-size")),e.css("top","2px"),e.css("position","relative"),e}return""};if("default"!==this.filtermode||a){if("excel"===this.filtermode||a){s.append(o),s.append(d),d.attr("tabindex",0),d.jqxListBox({rtl:t.rtl,_checkForHiddenParent:!1,checkboxes:!0,selectedIndex:2,width:l-15,height:130,theme:t.theme});var _=!0;t.addHandler(d,"checkChange",function(e){if(_)if(e.args.label!=t.gridlocalization.filterselectallstring){_=!1,d.jqxListBox("checkIndex",0,!0,!1);var i=d.jqxListBox("getCheckedItems"),r=d.jqxListBox("getItems");1==i.length?d.jqxListBox("uncheckIndex",0,!0,!1):r.length!=i.length&&d.jqxListBox("indeterminateIndex",0,!0,!1),_=!0}else _=!1,e.args.checked?d.jqxListBox("checkAll",!1):d.jqxListBox("uncheckAll",!1),_=!0})}}else{s.append(o),s.append(d),d.jqxDropDownList({_checkForHiddenParent:!1,autoItemsHeight:!0,rtl:t.rtl,enableBrowserBoundsDetection:!1,selectedIndex:2,width:l-15,height:23,dropDownHeight:150,dropDownWidth:l-15,selectionRenderer:D,source:p,theme:t.theme}),s.append(g);var q=new Array;q[0]=t.gridlocalization.filterandconditionstring,q[1]=t.gridlocalization.filterorconditionstring,f.jqxDropDownList({_checkForHiddenParent:!1,rtl:t.rtl,enableBrowserBoundsDetection:!1,autoDropDownHeight:!0,selectedIndex:0,width:60,height:23,source:q,selectionRenderer:D,theme:t.theme}),s.append(f),c.jqxDropDownList({_checkForHiddenParent:!1,autoItemsHeight:!0,rtl:t.rtl,enableBrowserBoundsDetection:!1,selectedIndex:2,width:l-15,height:23,dropDownHeight:150,dropDownWidth:l-15,selectionRenderer:D,source:p,theme:t.theme}),s.append(c),s.append(x)}s.append(v),t.updatefilterpanel&&t.updatefilterpanel(d,c,f,g,x,y,b,null,null,p)}})}(jqxBaseFramework);

